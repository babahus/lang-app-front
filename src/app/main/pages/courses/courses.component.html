<section class="bg-[#C3DCE3] min-h-screen flex-col justify-center">
  <div class="pt-12 max-w-5xl mx-auto px-3 md:px-5">
    <div class="bg-white rounded-lg w-full flex p-2 md:p-3 lg:p-4 relative justify-between items-center">

      <div class="flex gap-2 items-center">
        <button type="button" (click)="isCardInfoVisible = !isCardInfoVisible" class="bg-gray-100 hover:bg-gray-200 p-2 rounded-full">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
          </svg>
        </button>
        <!-- Card info for Courses  -->
        <div class="absolute top-[10%] left-[10%] bg-white rounded-lg shadow-lg z-10 w-[94%] sm:w-3/4" *ngIf="isCardInfoVisible">
          <div class="p-4">
            <div class='text-sm' style="font-family: Montserrat">
              <div class="relative mb-4">
                <img src="assets/img/course_card.png" alt="Course Image" class="sm:w-full sm:h-full h-24 w-80">
                <div class="absolute lg:top-[29%] lg:left-[51%] md:top-[28%] md:left-[51%] top-[25%] left-[50%]">
                  <span class="lg:text-2xl md:text-lg text-sm p-0 font-bold md:p-0 lg:p-1">1.</span>
                </div>
                <div class="absolute top-[78%] left-[87%] sm:top-[84%] sm:left-[89%]">
                  <span class="lg:text-2xl md:text-lg text-sm font-bold p-0 md:p-0 lg:p-1">2.</span>
                </div>
                <div class="absolute top-[1%] left-[87%] sm:top-[3%] sm:left-[90%]">
                  <span class="lg:text-2xl md:text-lg text-sm p-0 font-bold md:p-0 lg:p-1">3.</span>
                </div>
                <!-- Добавьте другие пометки аналогичным образом -->
              </div>

              <!-- Описание для пометок -->
              <ul>
                <li><strong>1:</strong> This is title of Course. When you clicking on it, you will be redirected on course page ( If you attach it)</li>
                <li><strong>2:</strong> This button for attach/detach course from your account. You can also attach course in modal window</li>
                <li><strong>3:</strong> This button for additional info about course. When your click on it, it open modal window with information about course</li>
                <!-- Описания для других пометок -->
              </ul>

              <!-- Оставшийся текст карточки -->
              <div class='text-sm' style="font-family: Montserrat">
                ...
              </div>
<!--              <p class="indent-4"><strong>Stage</strong> - this is a part of your course that students will progress through sequentially.</p>-->
<!--              <ul class="px-4 list-disc text-xs list-inside">-->
<!--                <li class="flex gap-2 items-start">-->
<!--                  <div class="text-[#2B788B]">-->
<!--                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">-->
<!--                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />-->
<!--                    </svg>-->
<!--                  </div>-->
<!--                  <p>Please provide a title and description for the stage to help students better understand what to expect.</p>-->
<!--                </li>-->
<!--              </ul>-->
            </div>
          </div>
        </div>
        <!-- Card info for Courses Ended  -->
      </div>
      <div (click)="openListExercise()" class="bg-gray-100 cursor-pointer rounded-lg text-[#757575] p-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
      </div>
<!--      Modal window-->
      <div [ngClass]="{'hidden' : !openDetails}" class="absolute top-[90%] right-[5%] z-10 border border-gray-100 bg-white shadow-lg rounded-lg p-3 text-sm" style="font-family: Montserrat">
        <ul class="font-semibold text-[#757575]">
          <li class="hover:bg-blue-50 p-2 rounded hover:text-[#2B788B]">
            <div class="flex items-center space-x-2 h-5 ">
              <input id="remember_free_courses" aria-describedby="remember" type="checkbox"
                     class="w-4 h-4 cursor-pointer border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-[#2B788B]"
                     required="" [(ngModel)]="showFreeCourses" (change)="filterCourses($event)">
              <label for="remember_free_courses" class="uppercase cursor-pointer">
<!--                Free Courses-->
                {{'free_courses' | translate}}
              </label>
            </div>
          </li>
          <li class="hover:bg-blue-50 p-2 rounded hover:text-[#2B788B]">
            <div class="flex items-center space-x-2 h-5 ">
              <input id="remember_paid_courses" aria-describedby="remember" type="checkbox"
                     class="w-4 h-4 cursor-pointer border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-[#2B788B]"
                     required="" [(ngModel)]="showPaidCourses" (change)="filterCourses($event)" >
              <label for="remember_paid_courses" class="uppercase cursor-pointer">
<!--                Paid Courses-->
                {{'paid_courses' | translate}}
              </label>
            </div>
          </li>
<!--          <li class="hover:bg-blue-50 p-2 rounded hover:text-[#2B788B]">-->
<!--            <div class="flex items-center space-x-2 h-5">-->
<!--              <input id="rememberPair" aria-describedby="remember" type="checkbox" class="w-4 h-4 cursor-pointer border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-[#2B788B]" required="">-->
<!--              <label for="rememberPair" class="uppercase  cursor-pointer">-->
<!--                pair-->
<!--              </label>-->
<!--            </div>-->
<!--          </li>-->
<!--          <li class="hover:bg-blue-50 p-2 rounded hover:text-[#2B788B]">-->
<!--            <div class="flex items-center space-x-2 h-5 ">-->
<!--              <input id="rememberPicture" aria-describedby="remember" type="checkbox" class="w-4 h-4 cursor-pointer border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-[#2B788B]" required="">-->
<!--              <label for="rememberPicture" class="uppercase cursor-pointer">-->
<!--                picture-->
<!--              </label>-->
<!--            </div>-->
<!--          </li>-->
<!--          <li class="hover:bg-blue-50 p-2 rounded hover:text-[#2B788B]">-->
<!--            <div class="flex items-center space-x-2 h-5 ">-->
<!--              <input id="rememberSentence" aria-describedby="remember" type="checkbox" class="w-4 h-4 cursor-pointer border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-[#2B788B]" required="">-->
<!--              <label for="rememberSentence" class="uppercase cursor-pointer">-->
<!--                sentence-->
<!--              </label>-->
<!--            </div>-->
<!--          </li>-->
        </ul>
      </div>

    </div>
  </div>
<!--  <div class="pt-6 max-w-5xl mx-auto">-->
<!--    <div class=" grid grid-cols-2 gap-x-4 lg:flex justify-between justify-items-start px-3 md:px-5 items-center"  style="font-family: Montserrat">-->
<!--      <div class="flex  justify-center w-full">-->
<!--        <div class="flex w-2/3 md:w-1/2 lg:w-full justify-start items-center lg:justify-center gap-3 p-2 cursor-pointer"-->
<!--          [ngClass]="{'border-b-2 border-black' : activeStages['stage1']}"-->
<!--             (click)="showFocusStage('stage1')">-->
<!--          <h1 style="font-family: DelaGothic" class="text-xl lg:text-2xl">A1</h1>-->
<!--          <p [ngClass]="{'bg-teal-600 text-white' : activeStages['stage1'], 'bg-emerald-400 text-emerald-700' : !activeStages['stage1']}"-->
<!--             class="p-1 px-2 rounded-lg font-semibold text-xs"-->
<!--          >-->
<!--            Easy-->
<!--          </p>-->
<!--        </div>-->
<!--      </div>-->
<!--      <div class="flex justify-center w-full">-->
<!--        <div class="flex w-2/3 md:w-1/2 lg:w-full justify-start items-center lg:justify-center gap-3 p-2 cursor-pointer"-->
<!--             (click)="showFocusStage('stage2')"-->
<!--             [ngClass]="{'border-b-2 border-black' : activeStages['stage2']}">-->
<!--          <h1 style="font-family: DelaGothic" class="text-xl lg:text-2xl">A2</h1>-->
<!--          <p [ngClass]="{'bg-teal-600 text-white' : activeStages['stage2'], 'bg-emerald-400 text-emerald-700' : !activeStages['stage2']}"-->
<!--             class="bg-emerald-400 p-1 px-2 rounded-lg text-emerald-700 font-semibold text-xs"-->
<!--          >-->
<!--            Easy-->
<!--          </p>-->
<!--        </div>-->
<!--      </div>-->
<!--      <div class="flex justify-center w-full">-->
<!--        <div class="flex w-2/3 md:w-1/2 lg:w-full justify-start items-center lg:justify-center gap-3 p-2 cursor-pointer"-->
<!--             (click)="showFocusStage('stage3')"-->
<!--             [ngClass]="{'border-b-2 border-black' : activeStages['stage3']}"-->
<!--        >-->
<!--          <h1 style="font-family: DelaGothic" class="text-xl lg:text-2xl">B1</h1>-->
<!--          <p [ngClass]="{'bg-amber-500 text-white' : activeStages['stage3'], 'bg-amber-200 text-amber-600' : !activeStages['stage3']}"-->
<!--             class=" p-1 px-2 rounded-lg  font-semibold text-xs"-->
<!--          >-->
<!--            Medium-->
<!--          </p>-->
<!--        </div>-->
<!--      </div>-->
<!--      <div class="flex justify-center w-full">-->
<!--        <div class="flex w-2/3 md:w-1/2 lg:w-full justify-start items-center lg:justify-center gap-3 p-2 cursor-pointer"-->
<!--             (click)="showFocusStage('stage4')"-->
<!--             [ngClass]="{'border-b-2 border-black' : activeStages['stage4']}"-->
<!--        >-->
<!--          <h1 style="font-family: DelaGothic" class="text-xl lg:text-2xl">B2</h1>-->
<!--          <p [ngClass]="{'bg-amber-500 text-white' : activeStages['stage4'], 'bg-amber-200 text-amber-600' : !activeStages['stage4']}"-->
<!--             class="bg-amber-200 p-1 px-2 rounded-lg text-amber-600 font-semibold text-xs"-->
<!--          >-->
<!--            Medium-->
<!--          </p>-->
<!--        </div>-->
<!--      </div>-->
<!--      <div class="flex justify-center w-full">-->
<!--        <div class="flex w-2/3 md:w-1/2 lg:w-full justify-start items-center lg:justify-center gap-3 p-2 cursor-pointer"-->
<!--             (click)="showFocusStage('stage5')"-->
<!--             [ngClass]="{'border-b-2 border-black' : activeStages['stage5']}"-->
<!--        >-->
<!--          <h1 style="font-family: DelaGothic" class="text-xl lg:text-2xl">C1</h1>-->
<!--          <p [ngClass]="{'bg-rose-500 text-white' : activeStages['stage5'], 'bg-rose-300 text-rose-700' : !activeStages['stage5']}"-->
<!--             class=" p-1 px-2 rounded-lg  font-semibold text-xs"-->
<!--          >-->
<!--            Hard-->
<!--          </p>-->
<!--        </div>-->
<!--      </div>-->
<!--      <div class="flex justify-center w-full">-->
<!--        <div class="flex w-2/3 md:w-1/2 lg:w-full justify-start lg:justify-center items-center gap-3 p-2 cursor-pointer"-->
<!--             (click)="showFocusStage('stage6')"-->
<!--             [ngClass]="{'border-b-2 border-black' : activeStages['stage6']}"-->
<!--        >-->
<!--          <h1 style="font-family: DelaGothic" class="text-xl lg:text-2xl">C2</h1>-->
<!--          <p [ngClass]="{'bg-rose-500 text-white' : activeStages['stage6'], 'bg-rose-300 text-rose-700' : !activeStages['stage6']}"-->
<!--             class="bg-rose-300 p-1 px-2 rounded-lg text-rose-700 font-semibold text-xs"-->
<!--          >-->
<!--            Hard-->
<!--          </p>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
  <div class="pt-6 mx-auto max-w-5xl lg:pt-12 pb-12 ">
    <div *ngIf="filteredCourses" class="grid gap-8 mb-6 lg:mb-16 md:grid-cols-1 px-3 md:px-5 lg:grid-cols-2 justify-items-center items-center">

<!--///////////-->
      <ng-container *ngFor="let course of filteredCourses">
        <div class="items-center relative bg-gray-50 overflow-hidden rounded-lg shadow sm:flex">
          <div class="h-48 md:h-full md:rounded-l-lg w-full md:w-1/2 lg:w-1/2 relative">
            <img src="./assets/img/courses-page/eleven-talking-points-tw.jpeg" class="rounded-l-lg object-cover object-center w-full h-full" alt="">
          </div>
          <div class="p-5 w-full lg:w-1/2">
            <div class="flex justify-between items-center" style="font-family: Montserrat">
              <div>
                <h3 class="cursor-pointer text-xl font-bold tracking-tight text-gray-900">
                  <a class="uppercase font-semibold text-base">{{ course.title }}</a>
                </h3>
              </div>
              <div>
                <p style="font-family: DelaGothic" class="text-[#2B788B]">
                  ${{ course.price }}
                </p>
              </div>
            </div>
            <p class="mt-3 mb-4 font-light text-xs text-[#757575]">{{ course.description }}</p>
            <div *ngIf="!isCourseAttached(course.id)" class="absolute cursor-pointer -bottom-2 -right-2 bg-[#C4A24C] rounded-xl p-2 text-white" (click)="attachCourseToUser(course.id)">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6" />
              </svg>
            </div>
            <div *ngIf="isCourseAttached(course.id)" class="absolute cursor-pointer -bottom-2 -right-2 bg-red-500 rounded-xl p-2 text-white" (click)="detachCourseFromUser(course.id)">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 12h12" />
              </svg>
            </div>
            <div class="absolute cursor-pointer -top-2 -right-2 bg-green-500 rounded-xl p-2 text-white" (click)="openCourseDetailModal(course)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="w-6 h-6" viewBox="0 0 16 16">
                <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
              </svg>
            </div>
          </div>
        </div>
      </ng-container>
      <!-- Detail Course Modal -->
      <div [ngClass]="{'hidden' : !showCourseDetailModal}" class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
        <div class="fixed inset-0 z-10 w-screen h-screen overflow-y-auto flex items-center justify-center">
          <div class="flex min-h-[28rem] items-center justify-center p-4 text-center sm:items-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:w-80 w-full sm:my-8 max-w-4xl">
              <div class="p-6">
                  <h1 class="text-2xl font-semibold mb-2 underline-header" style="font-family: DelaGothic;">Details of the Course</h1>
                  <p class="text-xl text-black md:text-2xl mb-4" style="font-family: DelaGothic;">{{ selectedCourse?.title }}</p>
                  <p class="text-xs md:text-sm font-medium text-[#757575] mb-6" style="font-family: Montserrat;">{{ selectedCourse?.description }}</p>

                  <div *ngFor="let stage of selectedCourse?.course_stages; let i = index">
                    <div (click)="toggleCheck(i)" class="relative cursor-pointer w-full bg-[#C3DCE3] items-center justify-start py-3 overflow-hidden font-medium transition-all rounded group" style="font-family: Montserrat">
                      <div [ngClass]="{'bg-[#2B788B] absolute bottom-0 transition-all ease-out duration-700 translate-x-0 left-0 w-full h-48': stage.isClicked}" class="-translate-x-full"></div>
                      <div class="flex items-center px-2">
                        <div [ngClass]="{'block': stage.isClicked, 'hidden': !stage.isClicked}">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-5 h-5 text-white duration-700 ease-in-out transform transition-all z-20" [ngClass]="{'translate-x-1': stage.isClicked}">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                          </svg>
                        </div>
                        <span class="relative z-50 px-3 font-bold" [ngClass]="{'transform translate-x-1 transition-colors duration-700 ease-in-out text-white': stage.isClicked, 'text-[#2B788B]': !stage.isClicked}">{{ stage.title }}</span>
                      </div>
                    </div>
                    <div *ngIf="stage.isClicked" class="bg-[#C3DCE3] rounded-lg p-2">
                      <div class="p-1">
                        <p class="text-xl text-black md:text-2xl mb-4" style="font-family: DelaGothic;">{{ stage?.title }}</p>
                        <p class="text-xs md:text-sm font-medium text-[#757575] mb-6" style="font-family: Montserrat;">{{ stage?.description }}</p>
                        <p class="text-xs md:text-sm font-light text-[#757575] mb-6" style="font-family: Montserrat;">
                          Stage contains {{ stage?.stage_exercises?.length }} exercises
                        </p>
                      </div>
                    </div>
                  </div>
                  <ng-container *ngIf="!selectedCourse?.course_stages">
                    <p class="text-xs md:text-sm font-medium text-[#757575] mb-6" style="font-family: Montserrat;">There is no stages in this Course</p>
                  </ng-container>
                  <button *ngIf="this.selectedCourse && !isCourseAttached(this.selectedCourse!.id)" (click)="attachCourseToUser(this.selectedCourse!.id)" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-full">
                    Attach Course
                  </button>
                </div>

              <button (click)="this.showCourseDetailModal = false" class="close-button">
                <span class="hover:text-green-500">&times;</span>
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- Detail Course Modal -->
      <!--      ///////-->
    </div>

    <div *ngIf="pagination" class="flex justify-center items-center space-x-2">
      <!-- Начальный элемент "страница назад" -->
      <button
        [disabled]="pagination!.current_page === 1"
        (click)="goToPage(pagination!.current_page - 1)"
        class="w-8 h-8 flex items-center justify-center rounded-full border-2 border-teal-500 bg-transparent text-teal-500 hover:bg-teal-100"
      >
        ←
      </button>

      <!-- Цикл для отображения страниц -->
      <ng-container *ngFor="let page of pages">
        <ng-container *ngIf="page === 1 || page === pagination!.last_page || (page >= pagination!.current_page - 2 && page <= pagination!.current_page + 2)">
          <button
            [class.bg-teal-500]="pagination!.current_page === page"
            [class.text-white]="pagination!.current_page === page"
            [class.text-teal-500]="pagination!.current_page !== page"
            (click)="goToPage(page)"
            class="w-8 h-8 flex items-center justify-center rounded-full border-2 border-teal-500 hover:bg-teal-100 hover:text-teal-500"
          >
            {{ page }}
          </button>
        </ng-container>

        <!-- Троеточие для пропущенных страниц -->
        <span *ngIf="page === 1 && pagination!.current_page > 4" class="w-8 h-8 flex items-center justify-center rounded-full text-teal-500">
      ...
          </span>
        <span *ngIf="page === pagination!.last_page && pagination!.current_page < pagination!.last_page - 3" class="w-8 h-8 flex items-center justify-center rounded-full text-teal-500">
      ...
          </span>
      </ng-container>

      <!-- Конечный элемент "страница вперед" -->
      <button
        [disabled]="pagination!.current_page === pagination!.last_page"
        (click)="goToPage(pagination!.current_page + 1)"
        class="w-8 h-8 flex items-center justify-center rounded-full border-2 border-teal-500 bg-transparent text-teal-500 hover:bg-teal-100"
      >
        →
      </button>
    </div>
  </div>
</section>
