<section class="min-h-screen bg-[#C3DCE3] w-full flex items-center justify-center p-3 lg:gap-12 lg:px-[10%] ">
  <!--   Start of the modal window for course deletion-->
  <div *ngIf="deleteModalCourse" class="relative z-50">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
    <div class="fixed inset-0 z-10 w-full overflow-y-auto">
      <div class="flex min-h-full items-center justify-center p-3 md:p-4 text-center sm:items-center sm:p-0">
        <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">

          <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div class="mt-3 text-left sm:ml-4 sm:mt-0 sm:text-left">
                <h3 style="font-family: DelaGothic" class="text-base font-semibold leading-6 text-gray-900">
                  Deleting a course: WARNING!
                </h3>
                <div class="mt-2">
                  <p style="font-family: Montserrat" class="text-sm text-gray-500">You are about to delete the course. Please make sure you have a backup of all the necessary data.</p>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
            <button type="button" (click)="deleteCourse()" class="inline-flex w-full justify-center rounded-md bg-[#945069] px-3 py-2 text-sm font-semibold text-white shadow-sm hover:opacity-90 sm:ml-3 sm:w-auto">Delete</button>
            <button (click)="showDeleteCourseMenu()"  type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--   end of the modal window for course deletion -->

  <!--   Start of the modal window for stage deletion-->
  <div *ngIf="modalDeleteStage" class="relative z-50">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
    <div class="fixed inset-0 z-10 w-full overflow-y-auto">
      <div class="flex min-h-full items-center justify-center p-3 md:p-4 text-center sm:items-center sm:p-0">
        <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">

          <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div class="mt-3 text-left sm:ml-4 sm:mt-0 sm:text-left">
                <h3 style="font-family: DelaGothic" class="text-base font-semibold leading-6 text-gray-900">
                  Deleting a stage: WARNING!
                </h3>
                <div class="mt-2">
                  <p style="font-family: Montserrat" class="text-sm text-gray-500">You are about to delete a stage. Make sure you have a backup of all the data you need.</p>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
            <button type="button" (click)="deleteStage()" class="inline-flex w-full justify-center rounded-md bg-[#945069] px-3 py-2 text-sm font-semibold text-white shadow-sm hover:opacity-90 sm:ml-3 sm:w-auto">Delete</button>
            <button (click)="showModalDeleteStage()"  type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Cancel</button>
          </div>

        </div>
      </div>
    </div>
  </div>
  <!--   end of the modal window for stage deletion -->


  <div [ngClass]="'block ' + (showMenuEditForm || showMenuCreateStage || showMenuProgressStages || showMenuAttachExerciseStage || showMenuEditStage ? '' : 'hidden')" class="rounded-lg bg-white shadow-lg md:max-w-lg w-full relative overflow-hidden">
        <!--Edit Form Start-->
        <div *ngIf="showMenuEditForm" class="lg:min-h-[28rem]">

            <div class="p-3 md:p-6 lg:p-4">
                <div class="flex justify-between items-center">
                    <div>
                        <span class="text-xl text-black md:text-2xl lg:px-0" style="font-family: DelaGothic">Course Edit</span>
                    </div>
                    <div class="text-black">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
                        </svg>
                    </div>
                </div>
                <div class="pt-3 md:pt-4 lg:pt-6">
                    <form [formGroup]="courseEditForm" (ngSubmit)="submitCourseEdit()" class="space-y-4 bg-blue-50 p-2 md:p-4 lg:p-6 rounded-lg">
                        <div class="rounded-r-lg space-y-2 w-full">
                            <div class="space-y-2" style="font-family: Montserrat">
                                <label for="title" class="block mb-2 text-xs md:text-sm font-semibold text-gray-700">Title</label>
                                <input type="text"
                                       name="title"
                                       id="title"
                                       formControlName="title"
                                       class="bg-[#C3DCE3]  w-full text-[#2B788B] font-semibold placeholder-[#80a4ad] text-xs md:text-sm rounded-lg focus:ring-[#2B788B] focus:border-[#2B788B] block p-2 " placeholder="Course title..." >

                                <div *ngIf="courseEditForm.get('title')?.hasError('required') && courseEditForm.controls.title.touched" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        Title is required.
                                    </p>
                                </div>
                                <div *ngIf="courseEditForm.get('title')?.hasError('minlength')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        Title should have a minimum of 5 characters
                                    </p>
                                </div>
                                <div *ngIf="errorShow && courseEditForm.errors && courseEditForm.getError('title')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        {{courseEditForm.getError('title')}}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="rounded-r-lg  space-y-2  w-full">
                            <div class="space-y-2" style="font-family: Montserrat">
                                <label for="description" class="block mb-2 text-xs md:text-sm font-semibold text-gray-700">Description</label>
                                <textarea type="text"
                                          name="description"
                                          id="description"
                                          formControlName="description"
                                          class="bg-[#C3DCE3]  w-full text-[#2B788B] font-semibold placeholder-[#80a4ad] sm:text-sm text-sm rounded-lg focus:ring-[#2B788B] focus:border-[#2B788B] block p-2 " placeholder="Course description..." ></textarea>

                                <div *ngIf="courseEditForm.get('description')?.hasError('required') && courseEditForm.controls.description.touched" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        Description is required.
                                    </p>
                                </div>
                                <div *ngIf="courseEditForm.get('description')?.hasError('minlength')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        Description should have a minimum of 12 characters
                                    </p>
                                </div>
                                <div *ngIf="errorShow && courseEditForm.errors && courseEditForm.getError('description')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        {{courseEditForm.getError('description')}}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="rounded-r-lg space-y-2 w-full">
                            <div class="space-y-2" style="font-family: Montserrat">
                                <label for="price" class="block mb-2 text-xs md:text-sm font-semibold text-gray-700">Price</label>
                                <div class="flex flex-row h-8 md:h-9 lg:h-10 w-1/3 rounded-lg relative bg-transparent mt-1">
                                    <button type="button" (click)="decrementPrice()" class="bg-[#C3DCE3] text-[#2B788B] hover:bg-[#5996A5] hover:text-white h-full w-20 rounded-l flex justify-center items-center cursor-pointer outline-none">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 md:w-6 md:h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
                                        </svg>
                                    </button>
                                    <input formControlName="price" type="number" inputmode="numeric" id="price" class="outline-none focus:outline-none text-center bg-[#C3DCE3]  w-full text-[#2B788B] font-semibold placeholder-[#80a4ad] md:text-base cursor-default flex items-center" name="custom-input-number">
                                    <button type="button" (click)="incrementPrice()" class="bg-[#C3DCE3] text-[#2B788B] hover:text-white hover:bg-[#5996A5] h-full w-20 rounded-r flex justify-center items-center cursor-pointer">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 md:w-6 md:h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                        </svg>
                                    </button>
                                </div>
                                <div *ngIf="courseEditForm.get('price')?.hasError('negativeNumber')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        Price cannot be negative.
                                    </p>
                                </div>
                                <div *ngIf="errorShow && courseEditForm.errors && courseEditForm.getError('price')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        {{courseEditForm.getError('price')}}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-4 justify-end" style="font-family: Montserrat">
                            <button type="button" (click)="showModalWindow('editCourse')" class="inline-flex w-auto cursor-pointer justify-center rounded-lg bg-[#945069] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90">Close</button>
                            <button type="submit" [disabled]="courseEditForm.invalid" class="inline-flex w-auto cursor-pointer justify-center rounded-lg bg-[#2B788B] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90">Edit Course</button>
                        </div>
                        <div *ngIf="errorShow" class="error-message">
                            <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                {{courseEditForm.getError('backend')}}
                            </p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!--Edit Form End-->

        <!--Create Stage Form Start-->
        <div *ngIf="showMenuCreateStage" class="relative">
            <div class="p-3 md:p-6 lg:p-4">
                <div class="flex justify-between items-center">
                    <div>
                        <span class="text-xl text-black md:text-2xl px-4 md:px-0" style="font-family: DelaGothic">Create Stage</span>
                    </div>
                    <div class="text-black">
                        <button type="button" (click)="toggleCardVisibility()" class="bg-amber-400 hover:bg-amber-500 p-2 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
                            </svg>
                        </button>
                        <!-- Toogle Card Info Block -->
                        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-lg z-10 p-3 w-[90%] md:w-3/4 overflow-y-auto" *ngIf="isCardInfoVisible">
                          <div class="p-2 md:pt-4 lg:p-4 ">
                            <div class="absolute top-1 right-1">
                              <button type="button" (click)="toggleCardVisibility()" class="bg-[#945069] hover:opacity-90 text-white p-1 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                              </button>
                            </div>
                            <div class='text-sm'  style="font-family: Montserrat">
                                <p class="indent-4"><strong>Stage</strong> - this is a part of your course that students will progress through sequentially.</p>
                                <ul class="px-4 list-disc text-xs list-inside">
                                    <li class="flex gap-2 items-start">
                                        <div class="text-[#2B788B]">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                                            </svg>
                                        </div>
                                        <p>Please provide a title and description for the stage to help students better understand what to expect.</p>
                                    </li>
                                    <li class="flex gap-2 items-start">
                                        <div class="text-[#2B788B]">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                                            </svg>
                                        </div>
                                        <p>Keep in mind that stages organize the course and represent its logical sections. Each stage can contain multiple exercises.</p>
                                    </li>
                                    <li class="flex gap-2 items-start">
                                        <div class="text-[#2B788B]">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                                            </svg>
                                        </div>
                                        <p>After creating the stage, you can link your exercises to it. </p>
                                    </li>
                                    <li class="flex gap-2 items-start">
                                        <div class="text-[#2B788B]">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                                            </svg>
                                        </div>
                                        <p>If you encounter any issues or difficulties while creating a stage, don't hesitate to contact our support team.</p>
                                    </li>
                                </ul>

                            </div>
                          </div>
                        </div>
                        <!-- Toogle Card Info Block End-->
                    </div>
                </div>
                <div class="pt-3 lg:pt-6">
                    <form [formGroup]="stageCreateForm" (ngSubmit)="submitStageCreate()" class="space-y-4 bg-blue-50 p-2 md:p-4 lg:p-6 rounded-lg">
                        <div class="rounded-r-lg space-y-2 w-full">
                            <div class="space-y-2" style="font-family: Montserrat">
                                <label for="titleStage" class="block mb-2 text-xs md:text-sm font-semibold text-gray-700">Title</label>
                                <input type="text"
                                       name="titleStage"
                                       id="titleStage"
                                       formControlName="title"
                                       class="bg-[#C3DCE3]  w-full text-[#2B788B] font-semibold placeholder-[#80a4ad] text-xs md:text-sm rounded-lg focus:ring-[#2B788B] focus:border-[#2B788B] block p-2 " placeholder="Course title..." >

                                <div *ngIf="stageCreateForm.get('title')?.hasError('required') && stageCreateForm.controls.title.touched" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        Title is required.
                                    </p>
                                </div>
                                <div *ngIf="stageCreateForm.get('title')?.hasError('minlength')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        Title should have a minimum of 5 characters
                                    </p>
                                </div>
                                <div *ngIf="errorShow && stageCreateForm.errors && stageCreateForm.getError('title')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        {{stageCreateForm.getError('title')}}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="rounded-r-lg  space-y-2  w-full">
                            <div class="space-y-2" style="font-family: Montserrat">
                                <label for="descriptionStage" class="block mb-2 text-xs md:text-sm font-semibold text-gray-700">Description</label>
                                <textarea type="text"
                                          name="descriptionStage"
                                          id="descriptionStage"
                                          formControlName="description"
                                          class="bg-[#C3DCE3]  w-full text-[#2B788B] font-semibold placeholder-[#80a4ad] sm:text-sm text-sm rounded-lg focus:ring-[#2B788B] focus:border-[#2B788B] block p-2 " placeholder="Course description..." ></textarea>

                                <div *ngIf="stageCreateForm.get('description')?.hasError('required') && stageCreateForm.controls.description.touched" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        Description is required.
                                    </p>
                                </div>
                                <div *ngIf="stageCreateForm.get('description')?.hasError('minlength')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        Description should have a minimum of 12 characters
                                    </p>
                                </div>
                                <div *ngIf="errorShow && stageCreateForm.errors && stageCreateForm.getError('description')" class="error-message">
                                    <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                        {{stageCreateForm.getError('description')}}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-4 justify-end" style="font-family: Montserrat">
                          <button type="button" (click)="showModalWindow('createStage')" class="inline-flex w-auto cursor-pointer justify-center rounded-lg bg-[#945069] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90">Close</button>
                          <button type="submit" [disabled]="stageCreateForm.invalid" class="inline-flex w-auto cursor-pointer justify-center rounded-lg bg-[#2B788B] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90">Create</button>
                        </div>
                        <div *ngIf="errorShow" class="error-message">
                            <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                                {{stageCreateForm.getError('backend')}}
                            </p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!--Create Stage Form End-->

    <!--Edit Stage Start-->
    <div *ngIf="showMenuEditStage" class="lg::min-h-[28rem]">

      <div class="p-3 md:p-6 lg:p-4">
        <div class="flex justify-between items-center">
          <div>
            <span class="text-xl text-black md:text-2xl md:px-0" style="font-family: DelaGothic">Stage Edit</span>
          </div>
          <div class="text-black">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
            </svg>
          </div>
        </div>
        <div class="pt-3 md:pt-4 lg:pt-6">
          <form [formGroup]="stageEditForm" (ngSubmit)="submitStageEdit()" class="space-y-4 bg-blue-50 p-2 md:p-4 lg:p-6 rounded-lg">
            <div class="rounded-r-lg space-y-2 w-full">
              <div class="space-y-2" style="font-family: Montserrat">
                <label for="titleStageEdit" class="block mb-2 text-xs md:text-sm font-semibold text-gray-700">Title</label>
                <input type="text"
                       name="title"
                       id="titleStageEdit"
                       formControlName="title"
                       class="bg-[#C3DCE3]  w-full text-[#2B788B] font-semibold placeholder-[#80a4ad] text-xs md:text-sm rounded-lg focus:ring-[#2B788B] focus:border-[#2B788B] block p-2 " placeholder="Course title..." >

                <div *ngIf="stageEditForm.get('title')?.hasError('required') && stageEditForm.controls.title.touched" class="error-message">
                  <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                    Title is required.
                  </p>
                </div>
                <div *ngIf="stageEditForm.get('title')?.hasError('minlength')" class="error-message">
                  <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                    Title should have a minimum of 5 characters
                  </p>
                </div>
                <div *ngIf="errorShow && stageEditForm.errors && stageEditForm.getError('title')" class="error-message">
                  <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                    {{stageEditForm.getError('title')}}
                  </p>
                </div>
              </div>
            </div>
            <div class="rounded-r-lg  space-y-2  w-full">
              <div class="space-y-2" style="font-family: Montserrat">
                <label for="descriptionStageEdit" class="block mb-2 text-xs md:text-sm font-semibold text-gray-700">Description</label>
                <textarea type="text"
                          name="description"
                          id="descriptionStageEdit"
                          formControlName="description"
                          class="bg-[#C3DCE3]  w-full text-[#2B788B] font-semibold placeholder-[#80a4ad] sm:text-sm text-sm rounded-lg focus:ring-[#2B788B] focus:border-[#2B788B] block p-2 " placeholder="Course description..." ></textarea>

                <div *ngIf="stageEditForm.get('description')?.hasError('required') && stageEditForm.controls.description.touched" class="error-message">
                  <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                    Description is required.
                  </p>
                </div>
                <div *ngIf="stageEditForm.get('description')?.hasError('minlength')" class="error-message">
                  <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                    Description should have a minimum of 12 characters
                  </p>
                </div>
                <div *ngIf="errorShow && stageEditForm.errors && stageEditForm.getError('description')" class="error-message">
                  <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                    {{stageEditForm.getError('description')}}
                  </p>
                </div>
              </div>
            </div>
            <div *ngIf="errorShow" class="error-message">
              <p class="mt-2 text-start font-medium text-[#945069] text-xs">
                {{stageEditForm.getError('backend')}}
              </p>
            </div>
            <div class="flex gap-4 justify-end" style="font-family: Montserrat">
              <button type="button" (click)="showModalWindow('editStage')" class="inline-flex w-auto cursor-pointer justify-center rounded-lg bg-[#945069] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90">Close</button>
              <button type="submit" [disabled]="stageEditForm.invalid" class="inline-flex w-auto cursor-pointer justify-center rounded-lg bg-[#2B788B] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!--Edit Stage End-->

      <!--Attach the exercise to the stage Start-->
      <div *ngIf="showMenuAttachExerciseStage" class="relative overflow-visible" >
        <div class="p-3 md:p-6 lg:p-4">
          <div class="flex mb-2 md:mb-4 justify-between items-center">
            <div>
              <span class="text-xl text-black md:text-2xl px-4 md:px-0" style="font-family: DelaGothic">Stages</span>
            </div>
            <div class="text-black">
              <button type="button" (click)="toggleCardVisibility()" class="bg-amber-400 hover:bg-amber-500 p-2 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
                </svg>
              </button>
              <div class="fixed top-0 lg:top-1/2 lg:-translate-y-1/2 left-1/2 transform -translate-x-1/2 bg-white border border-[#2B788B] rounded-lg shadow-lg z-40 w-[90%] lg:w-2/5 overflow-y-auto" *ngIf="isCardInfoVisible">
                <div class="p-4 relative">
                  <div class="absolute top-1 right-1">
                    <button type="button" (click)="toggleCardVisibility()" class="bg-[#945069] hover:opacity-90 text-white p-1 rounded-full">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </button>
                  </div>
                  <div class='text-sm'  style="font-family: Montserrat">
                    <ul class="lg:px-4 list-disc text-xs list-inside">
                      <li class="flex flex-col">
                        <span class="text-xs font-medium text-gray-900">
                          Selecting a Stage:
                        </span>
                        <div class="flex gap-2 items-start">
                          <div class="text-[#2B788B]">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                          </div>
                          <p>Choose the stage to which you want to add exercises. Click on the stage, and its details will be displayed.</p>
                        </div>
                      </li>
                      <li class="flex flex-col">
                        <span class="text-xs font-medium text-gray-900">
                          Choosing Exercise Types:
                        </span>
                        <div class="flex gap-2 items-start">
                          <div class="text-[#2B788B]">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                          </div>
                          <p>Select the type of exercises you wish to add to this stage. You have various exercise types available, such as "Compile Phrase," "Phonetic Transcript," "Pairs of Meaning," "Picture Association," and "Missing Links."</p>
                        </div>
                      </li>
                      <li class="flex flex-col">
                        <span class="text-xs font-medium text-gray-900">
                          Adding Exercises:
                        </span>
                        <div class="flex gap-2 items-start">
                          <div class="text-[#2B788B]">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                          </div>
                          <p>After selecting the exercise type, you will see a list of available exercises of that type. Pick the desired exercise from the list, and it will automatically be attached to your stage.</p>
                        </div>
                      </li>
                      <li class="flex flex-col">
                        <span class="text-xs font-medium text-gray-900">
                          Detaching Exercises:
                        </span>
                        <div class="flex gap-2 items-start">
                          <div class="text-[#2B788B]">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                          </div>
                          <p>If you change your mind about using a particular exercise for a stage, you can easily detach it. Just click the corresponding button to detach the exercise.</p>
                        </div>
                      </li>
                      <li class="flex flex-col">
                        <span class="text-xs font-medium text-gray-900">
                          Navigating Between Stages:
                        </span>
                        <div class="flex gap-2 items-start">
                          <div class="text-[#2B788B]">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                          </div>
                          <p>After filling one stage with exercises, you can move on to another stage. Select a different stage from the list.</p>
                        </div>
                      </li>
                      <li class="flex flex-col">
                        <span class="text-xs font-medium text-gray-900">
                          Creating a New Stage:
                        </span>
                        <div class="flex gap-2 items-start">
                          <div class="text-[#2B788B]">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                          </div>
                          <p> If you need to create a new stage, you have that option available.</p>
                        </div>
                      </li>
                      <li class="flex flex-col">
                        <span class="text-xs font-medium text-gray-900">
                          Support and Assistance:
                        </span>
                        <div class="flex gap-2 items-start">
                          <div class="text-[#2B788B]">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                          </div>
                          <p>Should you encounter any issues or difficulties when attaching or detaching exercises from stages, feel free to reach out to our customer support. We are here to help and address any questions you may have.</p>
                        </div>
                      </li>
                    </ul>

                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="p-2 md:p-4 lg:pt-6 space-y-4 bg-blue-50 lg:p-6 rounded-lg">
            <div *ngFor="let stage of courseData.course_stages; let i = index">
              <div class="grid grid-cols-1 gap-2">
                <div (click)="handleClick(i, stage)" class="relative cursor-pointer w-full bg-[#C3DCE3] p-2 items-center justify-start lg:py-3 overflow-hidden font-medium transition-all rounded group" style="font-family: Montserrat">
                  <div [ngClass]="{'bg-[#2B788B] absolute bottom-0 transition-all ease-out duration-700 translate-x-0 left-0 w-full h-48': stage.isClicked}" class="-translate-x-full"></div>
                  <div class="flex items-center lg:px-2">
                    <div [ngClass]="{'block': stage.isClicked, 'hidden': !stage.isClicked}">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-5 h-5 text-white duration-700 ease-in-out transform transition-all z-20" [ngClass]="{'translate-x-1': stage.isClicked}">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                      </svg>
                    </div>
                    <span class="relative z-30 font-bold" [ngClass]="{'transform translate-x-1 transition-colors duration-700 ease-in-out text-white': stage.isClicked, 'text-[#2B788B]': !stage.isClicked}">{{ stage.title }}</span>
                  </div>
                </div>
                <div class="flex gap-4 justify-end" style="font-family: Montserrat">
                  <button type="button" (click)="showDeleteStage(stage)" class="inline-flex w-auto cursor-pointer justify-center rounded-lg  px-3 py-2 text-xs lg:text-sm font-semibold underline text-gray-800  hover:scale-105">Delete</button>
                  <button type="button" (click)="handleButtonClick(stage, 'editStage')" class="inline-flex w-auto cursor-pointer justify-center rounded-lg  px-3 py-2 text-xs lg:text-sm font-semibold underline text-gray-800  hover:scale-105">Edit Stage</button>
                </div>
              </div>

              <!--      Attach exercise modal window start-->
              <div (appClickOutside)="closeStageInfo(stage)" [ngClass]="{'hidden' : !stage.isClicked}" class="bg-[#C3DCE3] w-full relative z-50 rounded-lg p-4">
                <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
                <div class="fixed inset-0 z-40 w-screen overflow-y-auto">
                  <div class="block md:flex gap-4 lg:min-h-full w-full md:justify-center p-2 md:p-4 text-center items-center sm:p-0">
                    <div class="modal relative transform overflow-hidden rounded-3xl bg-white text-left shadow-xl transition-all p-2 sm:my-8  sm:w-full md:max-w-[70%]">
                      <div class="p-2 bg-[#C3DCE3] rounded-3xl p relative grid-cols-1 lg:flex items-start gap-8">
                        <div class="flex justify-end  absolute top-1 right-1">
                          <button type="button"
                                  class="text-white hover:opacity-90  bg-[#945069] cursor-pointer tracking-widest focus:outline-none font-medium  rounded-full text-sm p-1 text-center"
                                  (click)="toggleIsClicked(stage)"
                                  style="font-family: DelaGothic"
                          >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                          </button>
                        </div>
                        <div class="text-start p-2 lg:p-4 w-full lg:w-1/3 grid grid-cols-1" style="font-family: Montserrat">
                          <div *ngFor="let type of exerciseTypes" class="">
                            <button (click)="fetchExerciseData(type)" class="mb-3 bg-[#f5f5f5] w-full hover:bg-gray-200 font-semibold text-[#2B788B] p-2 px-3 rounded-lg">
                              <span *ngIf="type == 'compile_phrase'">Compile Phrase</span>
                              <span *ngIf="type == 'audit'">Phonetic Transcript</span>
                              <span *ngIf="type == 'pair_exercise'">Pairs of Meaning</span>
                              <span *ngIf="type == 'picture_exercise'">Picture Association</span>
                              <span *ngIf="type == 'sentence'">Missing links</span>
                            </button>
                          </div>
                        </div>
                        <div *ngIf="exerciseData" class="flex justify-center items-center p-2 lg:p-5 w-full lg:w-2/4">
                          <div *ngIf="selectedType === 'compile_phrase'" class="flex-col w-full justify-center justify-items-center gap-3">
                            <mat-form-field class=" bg-[#C3DCE3] mx-auto w-full justify-center text-white rounded-lg" style="font-family: Montserrat">
                              <mat-label class="text-[#2B788B] font-semibold text-sm" >Select an Exercise</mat-label>
                              <mat-select [(ngModel)]="selectedExercise" (ngModelChange)="addSelectedExercise()" class="rounded-3xl">
                                <mat-option *ngFor="let exercise of exerciseData.data.data" [value]="exercise" class="bg-[#C3DCE3] ">
                                  <div class="text-[#2B788B] font-medium">
                                    {{ exercise.phrase }}
                                  </div>
                                </mat-option>
                                  <div *ngIf="exerciseData" class="flex justify-center my-3 items-center h-8 space-x-2">
                                      <button (click)="goToPage(currentPage[selectedType] - 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === 1"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                                          </svg>
                                      </button>
                                      <button *ngFor="let page of getPages(selectedType)"
                                              (click)="goToPage(page,selectedType)"
                                              [disabled]="page === currentPage[selectedType]"
                                              [class.current]="page === currentPage[selectedType]"
                                              class="h-full w-8 rounded-full text-[#2B788B] font-bold border-2 border-[#2B788B]"
                                      >
                                          {{ page }}
                                      </button>
                                      <button (click)="goToPage(currentPage[selectedType] + 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === totalPages"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                                          </svg>
                                      </button>
                                  </div>
                              </mat-select>
                            </mat-form-field>
                            <div class="mt-2 grid grid-cols-1 lg:grid-cols-2 gap-2 items-center">
                              <div *ngFor="let exercise of selectedExercises" class="flex justify-between gap-3 items-center bg-[#f5f5f5] hover:bg-gray-200 text-[#2B788B] font-medium px-4 p-2 rounded-lg">
                                <span>
                                  {{ exercise?.phrase }}
                                </span>
                                <button class="p-1 bg-[#cccccc] font-semibold text-[#f5f5f5] rounded-full" style="font-family: Montserrat" (click)="removeSelectedExercise(exercise)">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                  </svg>
                                </button>
                              </div>
                            </div>
                          </div>
                          <div *ngIf="selectedType === 'audit'" class="flex-col w-full justify-center justify-items-center gap-3">
                            <mat-form-field class="bg-[#C3DCE3] mx-auto w-full justify-center text-white rounded-lg" style="font-family: Montserrat">
                              <mat-label class="text-[#2B788B] font-semibold text-sm" >Select an Exercise</mat-label>
                              <mat-select [(ngModel)]="selectedExercise" (ngModelChange)="addSelectedExercise()" class="rounded-3xl">
                                <mat-option *ngFor="let exercise of exerciseData.data.data" [value]="exercise" class="bg-[#C3DCE3] ">
                                  <div class="text-[#2B788B] font-medium">
                                    {{ exercise.text }}
                                  </div>
                                </mat-option>
                                  <div *ngIf="exerciseData" class="flex justify-center my-3 items-center h-8 space-x-2">
                                      <button (click)="goToPage(currentPage[selectedType] - 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === 1"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                                          </svg>
                                      </button>
                                      <button *ngFor="let page of getPages(selectedType)"
                                              (click)="goToPage(page,selectedType)"
                                              [disabled]="page === currentPage[selectedType]"
                                              [class.current]="page === currentPage[selectedType]"
                                              class="h-full w-8 rounded-full text-[#2B788B] font-bold border-2 border-[#2B788B]"
                                      >
                                          {{ page }}
                                      </button>
                                      <button (click)="goToPage(currentPage[selectedType] + 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === totalPages"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                                          </svg>
                                      </button>
                                  </div>
                              </mat-select>
                            </mat-form-field>
                            <div class="mt-2 grid grid-cols-1 lg:grid-cols-2 gap-2 items-center">
                              <div *ngFor="let exercise of selectedExercises" class="flex justify-between gap-3 items-center bg-[#f5f5f5] hover:bg-gray-200 text-[#2B788B] font-medium px-4 p-2 rounded-lg">
                                <span>
                                  {{ exercise.text}}
                                </span>
                                <button class="p-1 bg-[#cccccc] font-semibold text-[#f5f5f5] rounded-full" style="font-family: Montserrat" (click)="removeSelectedExercise(exercise)">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                  </svg>
                                </button>
                              </div>
                            </div>
                          </div>
                          <div *ngIf="selectedType === 'pair_exercise'" class="flex-col w-full justify-center justify-items-center gap-3">
                            <mat-form-field class=" bg-[#C3DCE3] mx-auto w-full justify-center text-white rounded-lg" style="font-family: Montserrat">
                              <mat-label class="text-[#2B788B] font-semibold text-sm" >Select an Exercise</mat-label>
                              <mat-select [(ngModel)]="selectedExercise" (ngModelChange)="addSelectedExercise()" class="rounded-3xl">
                                <mat-option *ngFor="let exercise of exerciseData.data.data" [value]="exercise" class="bg-[#C3DCE3] w-full  border p-1 border-b-[#2B788B]">
                                  <div class="text-[#2B788B] font-medium">
                                    <div *ngFor="let option of exercise.options" class="grid gap-1 justify-center mx-auto items-center grid-cols-2">
                                      <p class="bg-emerald-400 rounded-lg text-center p-1 px-2">
                                        {{option.word}}
                                      </p>
                                      <p class="bg-amber-400 text-center p-1 px-2 rounded-lg">
                                        {{option.translation}}
                                      </p>
                                    </div>
                                  </div>
                                </mat-option>
                                  <div *ngIf="exerciseData" class="flex justify-center my-3 items-center h-8 space-x-2">
                                      <button (click)="goToPage(currentPage[selectedType] - 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === 1"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                                          </svg>
                                      </button>
                                      <button *ngFor="let page of getPages(selectedType)"
                                              (click)="goToPage(page,selectedType)"
                                              [disabled]="page === currentPage[selectedType]"
                                              [class.current]="page === currentPage[selectedType]"
                                              class="h-full w-8 rounded-full text-[#2B788B] font-bold border-2 border-[#2B788B]"
                                      >
                                          {{ page }}
                                      </button>
                                      <button (click)="goToPage(currentPage[selectedType] + 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === totalPages"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                                          </svg>
                                      </button>
                                  </div>
                              </mat-select>
                            </mat-form-field>
                            <div class="mt-2 grid grid-cols-1 lg:grid-cols-2 gap-2 items-center">
                              <div *ngFor="let exercise of selectedExercises" class="flex justify-between gap-3 items-center bg-[#f5f5f5] hover:bg-gray-200 text-[#2B788B] font-medium px-4 p-2 rounded-lg">
                                <div class="text-[#2B788B] w-full font-medium">
                                  <div *ngFor="let option of exercise.options" class="grid gap-1 justify-center items-center grid-cols-2">
                                    <p class="bg-emerald-400 rounded-lg text-center p-1 px-2">
                                      {{option.word}}
                                    </p>
                                    <p class="bg-amber-400 text-center p-1 px-2 rounded-lg">
                                      {{option.translation}}
                                    </p>
                                  </div>
                                </div>
                                <button class="p-1 bg-[#cccccc] font-semibold text-[#f5f5f5] rounded-full" style="font-family: Montserrat" (click)="removeSelectedExercise(exercise)">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                  </svg>
                                </button>
                              </div>
                            </div>
                          </div>

                          <div *ngIf="selectedType === 'picture_exercise'" class="flex-col w-full justify-center justify-items-center gap-3">
                            <mat-form-field class=" bg-[#C3DCE3] mx-auto w-full justify-center text-white rounded-lg" style="font-family: Montserrat">
                              <mat-label class="text-[#2B788B] font-semibold text-sm" >Select an Exercise</mat-label>
                              <mat-select [(ngModel)]="selectedExercise" (ngModelChange)="addSelectedExercise()" class="rounded-3xl">
                                <mat-option *ngFor="let exercise of exerciseData.data.data" [value]="exercise" class="bg-[#C3DCE3] border-b-gray-200 border ">
                                  <div class="text-[#2B788B] font-medium grid grid-cols-2 gap-2 py-1 ">
                                    <div *ngFor="let option of exercise.options" class="">
                                      <div *ngIf="!option.is_correct">
                                        <p class="bg-rose-400 text-white rounded-lg text-center p-1 px-2">
                                          {{ option.text }}
                                        </p>
                                      </div>
                                      <div *ngIf="option.is_correct">
                                        <p class="bg-emerald-400 rounded-lg text-center p-1 px-2">
                                          {{ option.text }}
                                        </p>
                                      </div>
                                    </div>
                                  </div>
                                </mat-option>
                                  <div *ngIf="exerciseData" class="flex justify-center my-3 items-center h-8 space-x-2">
                                      <button (click)="goToPage(currentPage[selectedType] - 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === 1"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                                          </svg>
                                      </button>
                                      <button *ngFor="let page of getPages(selectedType)"
                                              (click)="goToPage(page,selectedType)"
                                              [disabled]="page === currentPage[selectedType]"
                                              [class.current]="page === currentPage[selectedType]"
                                              class="h-full w-8 rounded-full text-[#2B788B] font-bold border-2 border-[#2B788B]"
                                      >
                                          {{ page }}
                                      </button>
                                      <button (click)="goToPage(currentPage[selectedType] + 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === totalPages"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                                          </svg>
                                      </button>
                                  </div>
                              </mat-select>
                            </mat-form-field>
                            <div class="mt-2 grid grid-cols-1 lg:grid-cols-2 gap-2 items-center">
                              <div *ngFor="let exercise of selectedExercises" class="flex justify-between gap-3 items-center bg-[#f5f5f5] hover:bg-gray-200 text-[#2B788B] font-medium px-4 p-2  rounded-lg">
                                <div class="text-[#2B788B] font-medium grid grid-cols-2 gap-2">
                                  <div *ngFor="let option of exercise.options">
                                    <div *ngIf="!option.is_correct">
                                      <span class="bg-rose-400 text-white rounded-lg text-center p-1 px-2">
                                        {{ option.text }}
                                      </span>
                                    </div>
                                    <div *ngIf="option.is_correct">
                                      <span class="bg-emerald-400 rounded-lg text-center p-1 px-2">
                                        {{ option.text }}
                                      </span>
                                    </div>
                                  </div>
                                </div>
                                <button class="p-1 bg-[#cccccc] font-semibold text-[#f5f5f5] rounded-full" style="font-family: Montserrat" (click)="removeSelectedExercise(exercise)">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                  </svg>
                                </button>
                              </div>
                            </div>
                          </div>
                          <div *ngIf="selectedType === 'sentence'" class="flex-col w-full justify-center justify-items-center gap-3">
                            <mat-form-field class=" bg-[#C3DCE3] mx-auto w-full justify-center text-white rounded-lg" style="font-family: Montserrat">
                              <mat-label class="text-[#2B788B] font-semibold text-sm" >Select an Exercise</mat-label>
                              <mat-select [(ngModel)]="selectedExercise" (ngModelChange)="addSelectedExercise()" class="rounded-3xl">
                                <mat-option *ngFor="let exercise of exerciseData.data.data" [value]="exercise" class="bg-[#C3DCE3] ">
                                  <div class="text-[#2B788B] font-medium">
                                    {{exercise.sentence_with_gaps}}
                                  </div>
                                </mat-option>
                                  <div *ngIf="exerciseData" class="flex justify-center my-3 items-center h-8 space-x-2">
                                      <button (click)="goToPage(currentPage[selectedType] - 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === 1"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                                          </svg>
                                      </button>
                                      <button *ngFor="let page of getPages(selectedType)"
                                              (click)="goToPage(page,selectedType)"
                                              [disabled]="page === currentPage[selectedType]"
                                              [class.current]="page === currentPage[selectedType]"
                                              class="h-full w-8 rounded-full text-[#2B788B] font-bold border-2 border-[#2B788B]"
                                      >
                                          {{ page }}
                                      </button>
                                      <button (click)="goToPage(currentPage[selectedType] + 1, selectedType)"
                                              [class.disabled]="currentPage[selectedType] === totalPages"
                                              class="h-full flex justify-center items-center w-8 rounded-full text-[#2B788B] border-2 border-[#2B788B]">
                                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                              <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                                          </svg>
                                      </button>
                                  </div>
                              </mat-select>
                            </mat-form-field>
                            <div class="mt-2 grid grid-cols-1 lg:grid-cols-2 gap-2 items-center">
                              <div *ngFor="let exercise of selectedExercises" class="flex justify-between gap-3 items-center bg-[#f5f5f5] hover:bg-gray-200 text-[#2B788B] font-medium px-4 p-2 rounded-lg">
                                <span>
                                  {{exercise?.sentence_with_gaps}}
                                </span>
                                <button class="p-1 bg-[#cccccc] font-semibold text-[#f5f5f5] rounded-full" style="font-family: Montserrat" (click)="removeSelectedExercise(exercise)">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                  </svg>
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="flex px-3 pb-3 justify-end gap-4" style="font-family: Montserrat">
          <button type="button" (click)="showModalWindow('attachExercise')" class="inline-flex w-auto cursor-pointer justify-center rounded-lg bg-[#945069] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90">Close</button>
        </div>
      </div>
      <!--Attach the exercise to the stage End-->

      <!-- Show Stages Progress for User -->
      <div *ngIf="showMenuProgressStages" class="relative overflow-visible" >
      <div class="p-3 md:p-6 lg:p-4">
        <div class="flex mb-2 md:mb-4 justify-between items-center">
          <div>
            <span class="text-xl text-black md:text-2xl px-4 md:px-0" style="font-family: DelaGothic">Stages</span>
          </div>
          <div class="text-black">
            <button type="button" (click)="toggleCardVisibility()" class="bg-amber-400 hover:bg-amber-500 p-2 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
              </svg>
            </button>
            <div class="fixed top-0 lg:top-1/2 lg:-translate-y-1/2 left-1/2 transform -translate-x-1/2 bg-white border border-[#2B788B] rounded-lg shadow-lg z-40 w-[90%] lg:w-2/5 overflow-y-auto" *ngIf="isCardInfoVisible">
              <div class="p-4 relative">
                <div class="absolute top-1 right-1">
                  <button type="button" (click)="toggleCardVisibility()" class="bg-[#945069] hover:opacity-90 text-white p-1 rounded-full">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
                <div class='text-sm'  style="font-family: Montserrat">
                  <ul class="lg:px-4 list-disc text-xs list-inside">
                    <li class="flex flex-col">
                        <span class="text-xs font-medium text-gray-900">
                          Selecting a Stage:
                        </span>
                      <div class="flex gap-2 items-start">
                        <div class="text-[#2B788B]">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                          </svg>
                        </div>
                        <p>Click on the stage, and its details will be displayed.</p>
                      </div>
                    </li>
                    <li class="flex flex-col">
                        <span class="text-xs font-medium text-gray-900">
                          Choosing Exercise:
                        </span>
                      <div class="flex gap-2 items-start">
                        <div class="text-[#2B788B]">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                          </svg>
                        </div>
                        <p>Choose the exercise you want to solve, click on the exercise card to navigate to the exercise solution page. Please note that you can navigate to exercises only with the
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="orange" class="bi bi-exclamation-square-fill" viewBox="0 0 16 16">
                            <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                          </svg>  image.</p>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="p-2 md:p-4 lg:pt-6 space-y-4 bg-blue-50 lg:p-6 rounded-lg">
          <div *ngFor="let stage of courseData.course_stages; let i = index">
            <div class="grid grid-cols-1 gap-2">
              <div (click)="toggleCheckForUser(i)" class="relative cursor-pointer w-full bg-[#C3DCE3] p-2 items-center justify-start lg:py-3 overflow-hidden font-medium transition-all rounded group" style="font-family: Montserrat">
                <div [ngClass]="{'bg-[#2B788B] absolute bottom-0 transition-all ease-out duration-700 translate-x-0 left-0 w-full h-48': stage.isClicked}" class="-translate-x-full"></div>
                <div class="flex items-center lg:px-2">
                  <div [ngClass]="{'block': stage.isClicked, 'hidden': !stage.isClicked}">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-5 h-5 text-white duration-700 ease-in-out transform transition-all z-20" [ngClass]="{'translate-x-1': stage.isClicked}">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                    </svg>
                  </div>
                  <span class="relative z-30 font-bold" [ngClass]="{'transform translate-x-1 transition-colors duration-700 ease-in-out text-white': stage.isClicked, 'text-[#2B788B]': !stage.isClicked}">{{ stage.title }}</span>
                </div>
              </div>
              <div *ngIf="stage.isClicked" class="bg-[#C3DCE3] rounded-lg p-2">
                <div class="p-1">
                  <p class="text-lg text-[#2B788B] md:text-xl mb-4" style="font-family: DelaGothic;">{{ stage?.title }}</p>
                  <p class="text-xs md:text-sm font-semibold text-[#757575] mb-6" style="font-family: Montserrat;">{{ stage?.description }}</p>
                  <div *ngIf="stage.isClicked" class="p-2">
                    <div class="border-b-2 border-cyan-700 mb-2">
                      <span class="text-lg text-[#2B788B] font-bold" style="font-family: Montserrat;">Exercises:</span>
                    </div>

                    <ng-container *ngIf="this.stagesProgress.length > 0">
                      <div class="p-2 bg-white rounded-lg mb-3 shadow-md" *ngFor="let exercise of stage.stage_exercises">
                        <div [ngClass]="{'cursor-pointer' : !isExerciseCompleted(exercise['id'])}" (click)="navigateToExercise(exercise)">
                          <div class="flex justify-between">
                            <p class="text-sm text-gray-500 mb-1">Exercise {{ exercise['id'] }}</p>
                            <div class="">
                              <!-- Checkmark SVG for completed exercises -->
                              <svg *ngIf="isExerciseCompleted(exercise['id'])" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="green" class="bi bi-check-square-fill" viewBox="0 0 16 16">
                                <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"/>
                              </svg>
                              <!-- Question mark SVG for incomplete exercises -->
                              <svg *ngIf="!isExerciseCompleted(exercise['id'])" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="orange" class="bi bi-exclamation-square-fill" viewBox="0 0 16 16">
                                <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                              </svg>
                            </div>
                          </div>

                          <div *ngIf="exercise['type'] === 'compile_phrase'" class="flex items-center p-2 bg-gray-100 rounded">
                            <span class="text-sm text-gray-700 mr-2">Phrase:</span>
                            <ng-container *ngIf="!isExerciseCompleted(exercise['id']); else completed">
                            <span class="font-medium text-center items-center">
                              **** ***** *****
                            </span>
                            </ng-container>
                            <ng-template #completed>
                              <span class="font-medium text-center items-center">{{exercise['data']['phrase']}}</span>
                            </ng-template>
                          </div>

                          <div *ngIf="exercise['type'] === 'sentence'" class="flex items-center p-2 bg-gray-100 rounded">
                            <span class="text-sm text-gray-700 mr-2">Sentence:</span>
                            <span class="font-medium text-center items-center">{{ exercise['data']['sentence_with_gaps'] }}</span>
                          </div>

                          <div *ngIf="exercise['type'] === 'pair_exercise'" class="flex items-center p-2 bg-gray-100 rounded">
                            <span class="text-sm text-gray-700 mr-2">Choose Pair For Words</span>
                          </div>

                          <div *ngIf="exercise['type'] === 'audit'" class="flex items-center p-2 bg-gray-100 rounded">
                            <span class="text-sm text-gray-700 mr-2">Listen and translate Phrase</span>
                          </div>

                          <div *ngIf="exercise['type'] === 'picture_exercise'" class="flex items-center p-2 bg-gray-100 rounded">
                            <span class="text-sm text-gray-700 mr-2">Look at the picture and choose an answer option.</span>
                          </div>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
      <div class="flex px-3 pb-3 justify-end gap-4" style="font-family: Montserrat">
        <button type="button" (click)="showModalWindow('showProgressStages')" class="inline-flex w-auto cursor-pointer justify-center rounded-lg bg-[#945069] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90">Close</button>
      </div>
    </div>
      <!-- End Show Show Stages Progress for User -->


  </div>
<!--  h-[28rem]-->
    <div *ngIf="!showMenuEditForm && !showMenuCreateStage && !showMenuProgressStages && !showMenuAttachExerciseStage && !deleteModalCourse && !showMenuEditStage"
         class="bg-white shadow-lg rounded-lg w-full md:max-w-lg lg:max-w-xl p-3 md:p-2 lg:p-4 ">
        <div class="w-full flex flex-col justify-between h-full md:p-4">
            <div [ngClass]="{'lg:pb-12' : currentUserRole != 'User'}" class="space-y-2">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-lg text-black md:text-2xl lg:px-0" style="font-family: DelaGothic">{{courseData.title}}</p>
                    </div>
                    <div class="text-black" style="font-family: DelaGothic">
                        <p class="text-end text-lg lg:p-2 lg:px-4 rounded-lg" *ngIf="courseData.price == 0">Free</p>
                        <p class="text-end text-lg lg:p-2 lg:px-4 rounded-lg" *ngIf="courseData.price !== 0">${{courseData.price}}</p>
                    </div>
                </div>

                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                      <svg class="w-4 h-4 text-yellow-300 mr-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
                      </svg>
                      <svg class="w-4 h-4 text-yellow-300 mr-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
                      </svg>
                      <svg class="w-4 h-4 text-yellow-300 mr-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
                      </svg>
                      <svg class="w-4 h-4 text-yellow-300 mr-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
                      </svg>
                      <svg class="w-4 h-4 text-gray-400 mr-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
                      </svg>
                    </div>
                    <span class="ml-2 text-sm font-medium text-gray-500" style="font-family: Montserrat">4.95 out of 5</span>
                </div>

                <div class="pt-4">
                    <p class="text-xs md:text-sm font-medium text-[#757575]" style="font-family: Montserrat">{{courseData.description}} Lorem ipsum dolor sit amet, consectetur adipisicing elit. Magnam, ratione similique. Consequuntur.</p>
                </div>

                <div class="pt-6">
                    <ng-container *ngIf="this.currentUserRole == 'Teacher'">
                      <div class="bg-[#C3DCE3] relative rounded w-full overflow-hidden p-2 flex justify-between space-y-2">
                        <div class="flex flex-col justify-between gap-8 h-full z-10">
                          <div>
                            <p class="text-lg text-[#2B788B] md:text-xl md:px-4 lg:px-0" style="font-family: DelaGothic">
                              Attach Stages :
                            </p>
                          </div>
                          <div class="md:px-4 lg:px-0">
                            <button type="button" (click)="showModalWindow('attachExercise')" class="bg-[#2B788B] text-white hover:text-[#2B788B] hover:bg-gray-50 p-2 rounded">
                              <svg *ngIf="!showMenuAttachExerciseStage" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                              </svg>
                              <svg *ngIf="showMenuAttachExerciseStage" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
                              </svg>
                            </button>
                          </div>
                        </div>
                        <img class="h-28 absolute transform -translate-y-1/2 top-1/2 right-2 z-0" src="./assets/img/course-view-page/3d-chart-column.png" alt="">
                      </div>
                    </ng-container>
                    <ng-container *ngIf="this.currentUserRole == 'User'">
                    <div class="bg-[#C3DCE3] relative rounded w-full overflow-hidden p-2 flex justify-between space-y-2">
                      <div class="flex flex-col justify-between gap-8 h-full z-10">
                        <div>
                          <p class="text-lg text-[#2B788B] md:text-xl md:px-4 lg:px-0" style="font-family: DelaGothic">
                            Show Stages :
                          </p>
                        </div>
                        <div class="md:px-4 lg:px-0">
                          <button type="button" (click)="showModalWindow('showProgressStages')" class="bg-[#2B788B] text-white hover:text-[#2B788B] hover:bg-gray-50 p-2 rounded">
                            <svg *ngIf="!showMenuProgressStages" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                            </svg>
                            <svg *ngIf="showMenuProgressStages" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
                            </svg>
                          </button>
                        </div>
                      </div>
                      <img class="h-28 absolute transform -translate-y-1/2 top-1/2 right-2 z-0" src="./assets/img/course-view-page/3d-chart-column.png" alt="">
                    </div>
                  </ng-container>
                </div>
            </div>

            <div *ngIf="this.currentUserRole !== 'User'" class="flex justify-between items-center pt-3 md:pt-5 lg:gap-4 lg:p-2 border-t border-gray-200" style="font-family: Montserrat">
                <div>
                    <button type="button" (click)="showModalWindow('createStage')"  class="inline-flex w-full justify-center rounded-lg bg-[#2B788B] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90 sm:w-auto">Create Stage</button>
                </div>
                <div class="flex gap-4 items-center">
                    <button type="button" (click)="showModalWindow('editCourse')" class="inline-flex w-full justify-center rounded-lg bg-[#2B788B] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90 sm:w-auto">Edit</button>
                    <div class="hidden md:block w-px h-6 bg-gray-300"></div>
                    <button type="button" (click)="showDeleteCourseMenu()" class="inline-flex w-full justify-center rounded-lg bg-[#945069] px-3 py-2 text-xs md:text-sm font-bold text-white shadow-sm hover:opacity-90 sm:w-auto">Delete</button>
                </div>
            </div>

        </div>
    </div>
</section>
